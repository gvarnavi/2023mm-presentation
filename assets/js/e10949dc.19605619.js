(self.webpackChunk_2023_mm_presentation=self.webpackChunk_2023_mm_presentation||[]).push([[981],{1187:(e,t,n)=>{var i={"./arquero.js":9391,"./arrow.js":7938,"./dependencies.js":7363,"./dependency.js":170,"./dom/canvas.js":6342,"./dom/context2d.js":9733,"./dom/download.js":2938,"./dom/element.js":3380,"./dom/index.js":1820,"./dom/input.js":7585,"./dom/range.js":7170,"./dom/select.js":1106,"./dom/svg.js":5895,"./dom/text.js":281,"./dom/uid.js":1831,"./duckdb.js":3874,"./fileAttachment.js":3277,"./files/buffer.js":3825,"./files/index.js":6155,"./files/text.js":9974,"./files/url.js":2174,"./generators/disposable.js":2238,"./generators/filter.js":7254,"./generators/index.js":6785,"./generators/input.js":8044,"./generators/map.js":3921,"./generators/observe.js":1367,"./generators/queue.js":9042,"./generators/range.js":2707,"./generators/valueAt.js":5890,"./generators/worker.js":8179,"./html.js":6566,"./index.js":7138,"./leaflet.js":3861,"./library.js":4739,"./md.js":1715,"./mermaid.js":9376,"./mutable.js":221,"./now.js":3666,"./promises/delay.js":2984,"./promises/index.js":5898,"./promises/tick.js":2989,"./promises/when.js":7782,"./require.js":9204,"./resolve.js":5545,"./sqlite.js":4054,"./svg.js":4745,"./table.js":8406,"./template.js":9225,"./tex.js":667,"./that.js":5243,"./vegalite.js":423,"./width.js":282,"./xlsx.js":538};function a(e){return Promise.resolve().then((()=>{if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n(i[e])}))}a.keys=()=>Object.keys(i),a.id=1187,e.exports=a},5162:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(7294),a=n(6010);const r={tabItem:"tabItem_Ymn6"};function l(e){let{children:t,hidden:n,className:l}=e;return i.createElement("div",{role:"tabpanel",className:(0,a.Z)(r.tabItem,l),hidden:n},t)}},4866:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var i=n(7462),a=n(7294),r=n(6010),l=n(2466),o=n(6550),s=n(1980),u=n(7392),c=n(12);function f(e){return function(e){return a.Children.map(e,(e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:n,attributes:i,default:a}}=e;return{value:t,label:n,attributes:i,default:a}}))}function p(e){const{values:t,children:n}=e;return(0,a.useMemo)((()=>{const e=t??f(n);return function(e){const t=(0,u.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function d(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function m(e){let{queryString:t=!1,groupId:n}=e;const i=(0,o.k6)(),r=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,s._X)(r),(0,a.useCallback)((e=>{if(!r)return;const t=new URLSearchParams(i.location.search);t.set(r,e),i.replace({...i.location,search:t.toString()})}),[r,i])]}function h(e){const{defaultValue:t,queryString:n=!1,groupId:i}=e,r=p(e),[l,o]=(0,a.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!d({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const i=n.find((e=>e.default))??n[0];if(!i)throw new Error("Unexpected error: 0 tabValues");return i.value}({defaultValue:t,tabValues:r}))),[s,u]=m({queryString:n,groupId:i}),[f,h]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[i,r]=(0,c.Nk)(n);return[i,(0,a.useCallback)((e=>{n&&r.set(e)}),[n,r])]}({groupId:i}),b=(()=>{const e=s??f;return d({value:e,tabValues:r})?e:null})();(0,a.useLayoutEffect)((()=>{b&&o(b)}),[b]);return{selectedValue:l,selectValue:(0,a.useCallback)((e=>{if(!d({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);o(e),u(e),h(e)}),[u,h,r]),tabValues:r}}var b=n(2389);const v={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function _(e){let{className:t,block:n,selectedValue:o,selectValue:s,tabValues:u}=e;const c=[],{blockElementScrollPositionUntilNextRender:f}=(0,l.o5)(),p=e=>{const t=e.currentTarget,n=c.indexOf(t),i=u[n].value;i!==o&&(f(t),s(i))},d=e=>{let t=null;switch(e.key){case"Enter":p(e);break;case"ArrowRight":{const n=c.indexOf(e.currentTarget)+1;t=c[n]??c[0];break}case"ArrowLeft":{const n=c.indexOf(e.currentTarget)-1;t=c[n]??c[c.length-1];break}}t?.focus()};return a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":n},t)},u.map((e=>{let{value:t,label:n,attributes:l}=e;return a.createElement("li",(0,i.Z)({role:"tab",tabIndex:o===t?0:-1,"aria-selected":o===t,key:t,ref:e=>c.push(e),onKeyDown:d,onClick:p},l,{className:(0,r.Z)("tabs__item",v.tabItem,l?.className,{"tabs__item--active":o===t})}),n??t)})))}function g(e){let{lazy:t,children:n,selectedValue:i}=e;const r=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=r.find((e=>e.props.value===i));return e?(0,a.cloneElement)(e,{className:"margin-top--md"}):null}return a.createElement("div",{className:"margin-top--md"},r.map(((e,t)=>(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==i}))))}function y(e){const t=h(e);return a.createElement("div",{className:(0,r.Z)("tabs-container",v.tabList)},a.createElement(_,(0,i.Z)({},e,t)),a.createElement(g,(0,i.Z)({},e,t)))}function w(e){const t=(0,b.Z)();return a.createElement(y,(0,i.Z)({key:String(t)},e))}},6119:(e,t,n)=>{"use strict";n.r(t),n.d(t,{assets:()=>je,contentTitle:()=>we,default:()=>qe,frontMatter:()=>ye,metadata:()=>xe,toc:()=>ke});var i=n(7462),a=n(7294),r=n(3905),l=n(4866),o=n(5162);const s=n.p+"assets/images/4DSTEM_defocused_looping-66b91c1ff9650ca7a0042ccb82dc5925.gif";var u=n(7940);function c(e){return e`# Ptychography Helper Functions`}function f(e){return e.html`<hr class="hideable-md">`}function p(e){return e("https://cdn.jsdelivr.net/gh/nicolaspanel/numjs@0.16/dist/numjs.min.js")}function d(e){return e("https://bundle.run/ndarray-ops@1.2.2")}function m(e){return e("https://bundle.run/ndarray-complex@1.0.3")}function h(e,t){return function(n,i){let a=e.zeros(n.shape);return t.atan2(a.selection,n.selection,i.selection),a}}function b(e,t){return function(n,i){let a=e.zeros(n.shape);return t.lts(a.selection,n.selection,i),t.bandseq(a.selection,1),a}}function v(e,t,n){return class i{constructor(t){this.shape=t;let n=t.slice();n.push(2),this.data=e.zeros(n),this._nulls=new Array(t.length).fill(null)}re(){return this.data.pick(...this._nulls,0)}im(){return this.data.pick(...this._nulls,1)}abs(){return e.sqrt(this.abs_sqr())}abs_sqr(){return e.add(this.re().multiply(this.re()),this.im().multiply(this.im()))}angle(){return t(this.im(),this.re())}clone(){let e=new i(this.shape);return e.data=this.data.clone(),e}conjugate(){let t=this.re().clone(),a=this.im().clone();n.conjeq(t.selection,a.selection);let r=new i(this.shape);return r.data=e.stack([t,a],-1),r}multiply(t){let a=this.re().clone(),r=this.im().clone(),l=t.re(),o=t.im();n.muleq(a.selection,r.selection,l.selection,o.selection);let s=new i(this.shape);return s.data=e.stack([a,r],-1),s}real_multiply(t){let a=this.re().clone(),r=this.im().clone(),l=t,o=e.zeros(t.shape);n.muleq(a.selection,r.selection,l.selection,o.selection);let s=new i(this.shape);return s.data=e.stack([a,r],-1),s}scalar_multiply(t,a){let r=this.re().clone(),l=this.im().clone();n.mulseq(r.selection,l.selection,t,a);let o=new i(this.shape);return o.data=e.stack([r,l],-1),o}add(t){let a=this.re().clone(),r=this.im().clone(),l=t.re(),o=t.im();n.addeq(a.selection,r.selection,l.selection,o.selection);let s=new i(this.shape);return s.data=e.stack([a,r],-1),s}subtract(t){let a=this.re().clone(),r=this.im().clone(),l=t.re(),o=t.im();n.subeq(a.selection,r.selection,l.selection,o.selection);let s=new i(this.shape);return s.data=e.stack([a,r],-1),s}}}function _(e){return function(t,n){let i=e.zeros(t),a=1/(t*n),r=1+((t-1)/2|0);for(var l=0;l<r;l++)i.set(l,l*a);for(l=r;l<t;l++)i.set(l,(l-t)*a);return i}}function g(e){return function(t,n){let i=[t.size,n.size],a=[];a[0]=e.zeros(i),a[1]=e.zeros(i);for(let e=0;e<i[1];e++)for(let r=0;r<i[0];r++)a[0].set(r,e,t.get(r)),a[1].set(r,e,n.get(e));return a}}function y(e){return function(t){let[n,i]=t.shape,a=n/2|0,r=i/2|0,l=e.zeros([n,i]);return l.slice([null,a],[null,r]).assign(t.slice(-a,-r),!1),l.slice([null,a],r).assign(t.slice(-a,[null,r]),!1),l.slice(-a,-r).assign(t.slice([null,a],[null,r]),!1),l.slice(-a,[null,r]).assign(t.slice([null,a],-r),!1),l}}function w(e,t,n,i){return function(a,r){let[l,o]=a.shape,[s,u]=r,c=new e([l,o]);c.data=t.fft(a.data);let f=n(l,1),p=n(o,1),[d,m]=i(f,p),h=-2*Math.PI,b=t.add(d.multiply(s),m.multiply(u)).multiply(h),v=new e([l,o]),_=t.cos(b),g=t.sin(b);v.data=t.stack([_,g],-1);let y=c.multiply(v);return y.data=t.ifft(y.data),y}}function x(e){return function(t,[n,i]){let a=new e([n,i]),r=n/2|0,l=i/2|0;return a.data.slice([null,r],[null,l],null).assign(t.slice([null,r],[null,l],null),!1),a.data.slice(-r,[null,l],null).assign(t.slice(-r,[null,l],null),!1),a.data.slice([null,r],-l,null).assign(t.slice([null,r],-l,null),!1),a.data.slice(-r,-l,null).assign(t.slice(-r,-l,null),!1),a}}function j(e,t,n){return function(i,a){let[r,l]=i.shape;console.log(r);let o=new e([r,l]);o.data=t.fft(i.data);let[s,u]=[r/a|0,l/a|0],c=n(o.data,[s,u]);return c.data=t.ifft(c.data),c}}function k(){return function(e){let t=9.109383*1e-30,n=1602177e-24,i=299792458;return 662607e-39/Math.sqrt(2*t*n*e)/Math.sqrt(1+n*e/2/t/i/i)*1e11}}function D(e){return function(t){let n=9.109383*1e-30,i=1602177e-24,a=299792458,r=e(t);return 2*Math.PI/r/t*(n*a*a+i*t)/(2*n*a*a+i*t)}}function z(e,t,n,i,a,r,l){return class{constructor(t,n,i,a,r){this._gpts=t.slice(),this._sampling=n.slice(),this._energy=i,this._wavelength=e(i),this._semiangle_cutoff=a,this._defocus=r}_get_scattering_angles(){let e=t(this._gpts[0],this._sampling[0]),r=t(this._gpts[1],this._sampling[1]),[l,o]=n(e,r);return[i.sqrt(i.add(l.multiply(l.multiply(this._wavelength*this._wavelength)),o.multiply(o.multiply(this._wavelength*this._wavelength)))),a(l,o)]}_evaluate_aberrations(e,t){let n=this._defocus/this._wavelength*Math.PI,a=e.multiply(e).multiply(n),l=i.cos(a),o=i.sin(a),s=new r(a.shape);return s.data=i.stack([l,o],-1),s}_evaluate_aperture(e,t){let n=this._semiangle_cutoff/1e3,a=new r(e.shape),o=l(e,n);return a.data=i.stack([o,i.zeros(e.shape)],-1),a}build(){let[e,t]=this._get_scattering_angles(),n=this._evaluate_aberrations(e,t),a=this._evaluate_aperture(e,t),l=n.multiply(a),o=new r(l.shape);o.data=i.ifft(l.data);let s=Math.sqrt(o.abs_sqr().sum());return this._array=o.scalar_multiply(1/s,0),this}}}function q(e,t){const n=e.module();return n.variable(t()).define(["md"],c),n.variable(t()).define(["htl"],f),n.variable(t("nj")).define("nj",["require"],p),n.variable(t("ops")).define("ops",["require"],d),n.variable(t("cops")).define("cops",["require"],m),n.variable(t("atan2")).define("atan2",["nj","ops"],h),n.variable(t("lt_int_s")).define("lt_int_s",["nj","ops"],b),n.variable(t("ComplexNDArray")).define("ComplexNDArray",["nj","atan2","cops"],v),n.variable(t("fftfreq")).define("fftfreq",["nj"],_),n.variable(t("meshgrid2D")).define("meshgrid2D",["nj"],g),n.variable(t("fftshift2D")).define("fftshift2D",["nj"],y),n.variable(t("fourier_shift")).define("fourier_shift",["ComplexNDArray","nj","fftfreq","meshgrid2D"],w),n.variable(t("corner_crop")).define("corner_crop",["ComplexNDArray"],x),n.variable(t("fourier_downsample")).define("fourier_downsample",["ComplexNDArray","nj","corner_crop"],j),n.variable(t("electron_wavelength_angstroms")).define("electron_wavelength_angstroms",k),n.variable(t("electron_interaction_parameter")).define("electron_interaction_parameter",["electron_wavelength_angstroms"],D),n.variable(t("ComplexProbe")).define("ComplexProbe",["electron_wavelength_angstroms","fftfreq","meshgrid2D","nj","atan2","ComplexNDArray","lt_int_s"],z),n}function E(e){return e`# 4DSTEM Multislice Simulation

Below we simulate the diffraction intensity for an fcc-like material made of 7 [111] atomic layers, using the multislice algorithm.  

First, move your mouse around the potential to move the probe around.`}function I(e){return e.range([100,500],{value:350,step:1,label:"Visualization width"})}function T(e,t,n,i,a,r){return e.plot({color:{label:t.label,domain:t.domain,scheme:t.scheme,type:t.type,legend:!0,style:{background:"none",width:3*n/4},exponent:t.exponent},style:{background:"none"},x:{axis:!1},y:{axis:!1},width:n,height:n/i[0]*i[1]-10,marginRight:10,marks:[e.raster(t.values,{width:t.width,height:t.height}),a,e.dot([[r[0],-r[1]]],{fill:"grey",opacity:.5,r:10})]})}function C(e){return e`Once you get a feel for our mode of interaction, turn on the "diffraction" visualization panel to perform a multislice simulation at that probe position.

(Be please be patient, this is running client-side in your browser 😬)`}function M(e,t,n,i,a,r,l){let o=[];return e.includes("probe")&&(o=[...o,t]),e.includes("diffraction")&&(o=[...o,n]),i`<div style="display:flex; flex-wrap: wrap;">
 ${o.map((e=>{let t=[a.raster(e.values,{width:e.width,height:e.height})];return a.plot({color:{label:e.label,domain:e.domain,scheme:e.scheme,type:e.type,legend:!0,style:{background:"none",width:3*r/4},exponent:e.exponent},style:{background:"none"},x:{axis:!1},y:{axis:!1},width:r,height:r/l[0]*l[1]-10,marginRight:10,marks:t})}))}`}function S(e){return e.checkbox(["probe","diffraction"],{value:["probe"],label:"Visualization Panels: "})}function A(e){return e`Finally, play around with the defocus, convergence angle, and energy to see how the diffraction intensities change! You can also toggle the multislice formalism on/off to see how crude of an approximation the "single-slice" approximation is for a sample this thin.`}function N(e){return e`#### Simulation Parameters`}function P(e){return e.toggle({label:"Use Multislice?",value:!0})}function V(e){return e.range([-250,250],{value:150,step:1,label:"Defocus [A]"})}function Z(e){return e.range([5,30],{value:25,step:.5,label:"Semiangle [mrad]"})}function F(e){return e.range([60,300],{value:80,step:10,label:"Voltage [keV]"})}function L(e){return e.html`<hr class="hideable-md">`}async function O(e,t){let n=new Float32Array(await e("FCC-slab-potential-7x244x242-float32.npy").arrayBuffer()),i=Array.from(n),a=t.zeros([7,244,242]);return a.selection.data=i,a}function G(e,t,n){let i=e(1e3*t)/e(8e4);return n.multiply(i)}function R(e,t){return{label:"Projected Electrostatic Potential (rad)",domain:[0,Math.PI],scheme:"Purples",width:e.shape[2],height:e.shape[1],values:t.flatten().tolist()}}function U(e,t){let n=[];for(let i=0;i<e[0];i++)for(let t=0;t<e[1];t++)n=[...n,{x:i,y:t}];return t.rect(n,t.pointer({x1:"x",x2:e=>e.x+1,y1:"y",y2:e=>e.y+1,stroke:"none",fill:"none"}))}function $(e,t){let[n,i,a]=e.shape,r=t.zeros([i,a]);for(let l=0;l<n;l++){let t=e.pick(l,null,null);r=r.add(t)}return r}function B(e,t,n,i){let[a,r,l]=e.shape;return[...Array(a+1)].map(((o,s)=>{if(s<a){let i=new t([r,l]),a=e.pick(s,null,null),o=n.cos(a),u=n.sin(a);return i.data=n.stack([o,u],-1),i}{let e=new t([r,l]),a=n.cos(i),o=n.sin(i);return e.data=n.stack([a,o],-1),e}}))}function X(){return[.1,.1]}function Y(e){return[e.shape[1],e.shape[2]]}function H(e,t,n,i,a,r){return new e(t,n,1e3*i,a,r).build()}function J(e,t,n,i){if(e.includes("probe")){let e=t(n._array,[i[1],-i[0]]).abs_sqr();return{label:"Illuminating Probe Intensity",scheme:"Greys",width:e.shape[1],height:e.shape[0],values:e.flatten().tolist()}}}function K(e,t,n,i,a){return function(r,l,o,s){let u=e(o)*Math.PI*s,c=t(r[0],l[0]),f=t(r[1],l[1]),[p,d]=n(c,f),m=i.add(p.multiply(p),d.multiply(d)).multiply(u),h=i.cos(m),b=i.sin(m),v=new a(r);return v.data=i.stack([h,b],-1),v}}function Q(e,t){return function(n,i){let a=new e(n.shape);return a.data=t.fft(n.data),a.data=t.ifft(a.multiply(i).data),a}}function W(e,t,n){return function(i,a){let[r,l,o]=i.shape,s=a.clone();for(let u=0;u<r;u++)s=s.multiply(e[u]),u+1<r&&(s=t(s,n));return s}}function ee(e){return function(t,n){let i=n.clone();return i=i.multiply(e[t.shape[0]]),i}}function te(e,t,n,i,a,r){return function(l,o,[s,u]){let c=(e?t:n)(l,o),f=new i(c.shape);return f.data=a.fft(c.data),r(f.data,[s,u]).abs_sqr()}}function ne(e,t,n,i){return e(t,n,1e3*i,20/7)}function ie(e,t,n,i,a,r,l,o){if(e.includes("diffraction")){let e=o(t(n,i(a._array,[r[1],r[0]]),l));return{label:"Diffraction Intensities",scheme:"Magma",domain:[0,150],type:"pow",exponent:.5,width:e.shape[1],height:e.shape[0],values:e.flatten().tolist()}}}function ae(e){return[e[0]/2,-e[1]/2]}function re(e,t){null!==e&&(t.value=[e.x,-e.y])}function le(e,t){const i=e.module();const a=new Map([["FCC-slab-potential-7x244x242-float32.npy",{url:new URL(n(6898),n.b),mimeType:"application/octet-stream",toString:function(){return this.url}}]]);i.builtin("FileAttachment",e.fileAttachments((e=>a.get(e)))),i.variable(t()).define(["md"],E),i.variable(t("viewof viz_width")).define("viewof viz_width",["Inputs"],I),i.variable(t("viz_width")).define("viz_width",["Generators","viewof viz_width"],((e,t)=>e.input(t))),i.variable(t("viewof mouseover_potential")).define("viewof mouseover_potential",["Plot","potential_dictionary","viz_width","gpts","mouseover_pointer","probe_xy"],T),i.variable(t("mouseover_potential")).define("mouseover_potential",["Generators","viewof mouseover_potential"],((e,t)=>e.input(t))),i.variable(t()).define(["md"],C),i.variable(t("probe_diffraction_visualization")).define("probe_diffraction_visualization",["visualization_checkboxes","probe_dictionary","dp_dictionary","html","Plot","viz_width","gpts"],M),i.variable(t("viewof visualization_checkboxes")).define("viewof visualization_checkboxes",["Inputs"],S),i.variable(t("visualization_checkboxes")).define("visualization_checkboxes",["Generators","viewof visualization_checkboxes"],((e,t)=>e.input(t))),i.variable(t()).define(["md"],A),i.variable(t()).define(["md"],N),i.variable(t("viewof use_multislice")).define("viewof use_multislice",["Inputs"],P),i.variable(t("use_multislice")).define("use_multislice",["Generators","viewof use_multislice"],((e,t)=>e.input(t))),i.variable(t("viewof defocus")).define("viewof defocus",["Inputs"],V),i.variable(t("defocus")).define("defocus",["Generators","viewof defocus"],((e,t)=>e.input(t))),i.variable(t("viewof semiangle")).define("viewof semiangle",["Inputs"],Z),i.variable(t("semiangle")).define("semiangle",["Generators","viewof semiangle"],((e,t)=>e.input(t))),i.variable(t("viewof energy")).define("viewof energy",["Inputs"],F),i.variable(t("energy")).define("energy",["Generators","viewof energy"],((e,t)=>e.input(t))),i.variable(t()).define(["htl"],L);const r=e.module(q);return i.import("nj",r),i.import("ComplexNDArray",r),i.import("fftfreq",r),i.import("fftshift2D",r),i.import("corner_crop",r),i.import("meshgrid2D",r),i.import("fourier_shift",r),i.import("ComplexProbe",r),i.import("electron_wavelength_angstroms",r),i.import("electron_interaction_parameter",r),i.variable(t("potential_raw")).define("potential_raw",["FileAttachment","nj"],O),i.variable(t("potential")).define("potential",["electron_interaction_parameter","energy","potential_raw"],G),i.variable(t("potential_dictionary")).define("potential_dictionary",["potential","projected_potential"],R),i.variable(t("mouseover_pointer")).define("mouseover_pointer",["gpts","Plot"],U),i.variable(t("projected_potential")).define("projected_potential",["potential","nj"],$),i.variable(t("complex_potentials")).define("complex_potentials",["potential","ComplexNDArray","nj","projected_potential"],B),i.variable(t("sampling")).define("sampling",X),i.variable(t("gpts")).define("gpts",["potential"],Y),i.variable(t("real_space_probe")).define("real_space_probe",["ComplexProbe","gpts","sampling","energy","semiangle","defocus"],H),i.variable(t("probe_dictionary")).define("probe_dictionary",["visualization_checkboxes","fourier_shift","real_space_probe","probe_xy"],J),i.variable(t("propagator_array")).define("propagator_array",["electron_wavelength_angstroms","fftfreq","meshgrid2D","nj","ComplexNDArray"],K),i.variable(t("propagate_wavefunction")).define("propagate_wavefunction",["ComplexNDArray","nj"],Q),i.variable(t("multislice_propagation")).define("multislice_propagation",["complex_potentials","propagate_wavefunction","fixed_dz_propagator"],W),i.variable(t("singleslice_propagation")).define("singleslice_propagation",["complex_potentials"],ee),i.variable(t("diffraction_intensity")).define("diffraction_intensity",["use_multislice","multislice_propagation","singleslice_propagation","ComplexNDArray","nj","corner_crop"],te),i.variable(t("fixed_dz_propagator")).define("fixed_dz_propagator",["propagator_array","gpts","sampling","energy"],ne),i.variable(t("dp_dictionary")).define("dp_dictionary",["visualization_checkboxes","diffraction_intensity","potential","fourier_shift","real_space_probe","probe_xy","gpts","fftshift2D"],ie),i.define("initial probe_xy",["gpts"],ae),i.variable(t("mutable probe_xy")).define("mutable probe_xy",["Mutable","initial probe_xy"],((e,t)=>new e(t))),i.variable(t("probe_xy")).define("probe_xy",["mutable probe_xy"],(e=>e.generator)),i.variable(t()).define(["mouseover_potential","mutable probe_xy"],re),i}function oe(e){return e}function se(e){return e}function ue(e){return e}function ce(e){return e}function fe(e){return e`#### Simulation Parameters`}function pe(e){return e}function de(e){return e}function me(e){return e}function he(e){return e}function be(e){return e.html`<hr class="hideable-md">`}function ve(e,t){e.value=[t.x,-t.y]}function _e(e,t){const n=e.module();n.variable(t()).define(["viewof viz_width"],oe),n.variable(t()).define(["viewof mouseover_potential"],se),n.variable(t()).define(["probe_diffraction_visualization"],ue),n.variable(t()).define(["viewof visualization_checkboxes"],ce),n.variable(t()).define(["md"],fe),n.variable(t()).define(["viewof defocus"],pe),n.variable(t()).define(["viewof semiangle"],de),n.variable(t()).define(["viewof energy"],me),n.variable(t()).define(["viewof use_multislice"],he),n.variable(t()).define(["htl"],be);const i=e.module(le);return n.import("viewof mouseover_potential",i),n.import("mouseover_potential",i),n.import("mutable probe_xy",i),n.import("probe_xy",i),n.import("probe_diffraction_visualization",i),n.import("viewof use_multislice",i),n.import("use_multislice",i),n.import("viewof visualization_checkboxes",i),n.import("visualization_checkboxes",i),n.import("viewof defocus",i),n.import("defocus",i),n.import("viewof semiangle",i),n.import("semiangle",i),n.import("viewof energy",i),n.import("energy",i),n.import("viewof viz_width",i),n.import("viz_width",i),n.variable(t()).define(["mutable probe_xy","mouseover_potential"],ve),n}const ge=function(){const e=(0,a.useRef)();return(0,a.useEffect)((()=>{const t=new u.r_;return t.module(_e,u.lj.into(e.current)),()=>t.dispose()}),[]),a.createElement(a.Fragment,null,a.createElement("div",{ref:e}))},ye={id:"em-bg_4dstem",sidebar_position:1,title:"4DSTEM",hide_table_of_contents:!0,hide_title:!0},we=void 0,xe={unversionedId:"em-bg/em-bg_4dstem",id:"em-bg/em-bg_4dstem",title:"4DSTEM",description:"4D Scanning Transmission Electron Microscopy",source:"@site/slides/em-bg/em-bg_4dstem.mdx",sourceDirName:"em-bg",slug:"/em-bg/em-bg_4dstem",permalink:"/2023mm-presentation/slides/em-bg/em-bg_4dstem",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{id:"em-bg_4dstem",sidebar_position:1,title:"4DSTEM",hide_table_of_contents:!0,hide_title:!0},sidebar:"tutorialSidebar",previous:{title:"Talk Outline",permalink:"/2023mm-presentation/slides/intro"},next:{title:"Imaging Magnetization",permalink:"/2023mm-presentation/slides/em-bg/em-bg_magnetization"}},je={},ke=[{value:"4D Scanning Transmission Electron Microscopy",id:"4d-scanning-transmission-electron-microscopy",level:2}],De={toc:ke},ze="wrapper";function qe(e){let{components:t,...n}=e;return(0,r.kt)(ze,(0,i.Z)({},De,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"4d-scanning-transmission-electron-microscopy"},"4D Scanning Transmission Electron Microscopy"),(0,r.kt)(l.Z,{mdxType:"Tabs"},(0,r.kt)(o.Z,{value:"schematic",label:"Schematic Description",default:!0,mdxType:"TabItem"},(0,r.kt)("ul",null,(0,r.kt)("li",null," Focused electron beam scanned across sample "),(0,r.kt)("ul",null,(0,r.kt)("li",null," Large convergence angle \u2192 atomic resolution ")),(0,r.kt)("li",null," Diffraction intensities are collected on a fast detector at each scan position "),(0,r.kt)("ul",null,(0,r.kt)("li",null,' 2D diffraction patterns on a 2D raster grid \u2192 "4D-STEM" '))),(0,r.kt)("figure",null,(0,r.kt)("img",{src:s,alt:"4DSTEM Schematic",width:"50%",height:"auto"}))),(0,r.kt)(o.Z,{value:"interactive-simulation",label:"Interactive Simulation",mdxType:"TabItem"},(0,r.kt)(ge,{mdxType:"Multislice4DstemComponent"}))))}qe.isMDXComponent=!0},6898:(e,t,n)=>{"use strict";e.exports=n.p+"b4465db3bc3bf3dd.bin"}}]);